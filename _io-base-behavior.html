<link rel="import" href="../polymer/polymer.html">
<script>
  /**
   * `Polymer.IoBaseBehavior` Base behavior for io-value input elements
   *
   * @demo demo/index.html
   * @polymerBehavior Polymer.IoBaseBehavior
   */
  Polymer.IoBaseBehavior = {
    properties: {
      disabled: {
        value: false,
        notify: true,
        type: Boolean,
        observer: '_disabledChanged'
      },
      /**
       * true if value type is invalid
       *
       * @attribute invalid
       * @type boolean
       * @default false
       */
      invalid: {
        value: false,
        type: Boolean,
        reflectToAttribute: true
      }
    },
    hostAttributes: {
      tabindex: 0
    },
    listeners: {
      'focus': '_onFocus',
      'blur': '_onBlur',
    },
    _onFocus: function(event) {},
    _onBlur: function(event) {},
    _setValue: function(value) {
      if (value === this.value) return;
      var oldValue = this.value;
      this.value = value;
      /**
       * Fired when an value attribute is set by user action.
       * This method should only be invoked from functions triggered by user action.
       *
       * @event io-value-set
       * @param {Object} detail
       * @param {Object} detail.element the input element where value was set.
       * @param {Object} detail.value new value.
       * @param {Object} detail.oldValue old value.
       */
      this.fire('io-value-set', {element: this, value: this.value, oldValue: oldValue}, {bubbles: true});
    },
    _disabledChanged: function() {
      if (this.disabled) {
        this.removeAttribute('tabindex');
        this.setAttribute('aria-disabled', '');
      } else {
        this.setAttribute('tabindex', 0);
        this.removeAttribute('aria-disabled');
      }
    }
  };
</script>
